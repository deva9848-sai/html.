<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { background-color: #f4f6f9; margin: 0; font-family: 'Segoe UI', sans-serif; }
        .login-container {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .login-card {
            width: 100%;
            max-width: 420px;
            padding: 40px 30px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            background: white;
        }
        .login-logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #5a67d8;
        }
        .sidebar { height: 100vh; background-color: #343a40; position: fixed; width: 250px; transition: all 0.3s; }
        .main-content { margin-left: 250px; padding: 20px; transition: all 0.3s; }
        .hidden { display: none !important; }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .sidebar { width: 80px; }
            .sidebar .nav-link span, .sidebar h4, .sidebar hr { display: none; }
            .main-content { margin-left: 80px; }
        }
    </style>
</head>
<body>

<!-- ==================== LOGIN PAGE ==================== -->
<div id="loginPage" class="login-container">
    <div class="login-card">
        <div class="text-center mb-4">
            <h2 class="login-logo">EMS Pro</h2>
            <p class="text-muted">Employee Management System</p>
        </div>
        <form id="loginForm">
            <div class="mb-3">
                <label class="form-label">Employee ID / Email</label>
                <input type="text" id="username" class="form-control form-control-lg" placeholder="EMP001 or john@example.com" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Password</label>
                <input type="password" id="password" class="form-control form-control-lg" placeholder="Enter your password" required>
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Login</button>
            </div>
            <div class="text-center mt-3">
                <small class="text-danger" id="loginError"></small>
            </div>
        </form>

        <!-- Demo Credentials (Remove in production) -->
        <div class="mt-4 text-center text-muted small">
            <strong>Demo Login:</strong><br>
            ID: <code>EMP001</code> | Password: <code>password123</code><br>
            Or Email: <code>john@example.com</code> | Password: <code>password123</code>
        </div>
    </div>
</div>

<!-- ==================== MAIN APP (Hidden until login) ==================== -->
<div id="app" class="hidden">

    <!-- Sidebar -->
    <nav class="sidebar text-white p-3">
        <h4 class="text-center text-white">EMS Pro</h4>
        <hr class="bg-light">
        <ul class="nav flex-column">
            <li class="nav-item"><a href="#" class="nav-link active" data-page="dashboard"><i class="bi bi-house"></i> <span>Dashboard</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="profile"><i class="bi bi-person"></i> <span>Profile</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="domain"><i class="bi bi-code-slash"></i> <span>Domain/Skills</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="projects"><i class="bi bi-folder"></i> <span>Projects</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="updates"><i class="bi bi-journal-text"></i> <span>Work Updates</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="attendance"><i class="bi bi-calendar-check"></i> <span>Attendance</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="chat"><i class="bi bi-chat-dots"></i> <span>Chat</span></a></li>
            <li class="nav-item"><a href="#" class="nav-link" data-page="payslip"><i class="bi bi-currency-rupee"></i> <span>Pay Slips</span></a></li>
            <li class="nav-item mt-5"><a href="#" id="logout" class="nav-link text-danger"><i class="bi bi-box-arrow-right"></i> <span>Logout</span></a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Your existing pages (dashboard, profile, etc.) go here exactly as before -->
        <!-- I'll paste only one as example, you already have the rest -->

        <div id="dashboard" class="page">
            <h2>Welcome, <span id="welcomeName">John Doe</span>!</h2>
            <div class="row">
                <div class="col-md-3"><div class="card text-white bg-primary"><div class="card-body"><h5>10</h5><p>Total Employees</p></div></div></div>
                <div class="col-md-3"><div class="card text-white bg-success"><div class="card-body"><h5>8</h5><p>Present Today</p></div></div></div>
                <div class="col-md-3"><div class="card text-white bg-warning"><div class="card-body"><h5>3</h5><p>Active Projects</p></div></div></div>
                <div class="col-md-3"><div class="card text-white bg-danger"><div class="card-body"><h5>2</h5><p>Pending Updates</p></div></div></div>
            </div>
        </div>

        <!-- Paste ALL your other pages (profile, domain, projects, etc.) exactly as you had them -->
        <!-- ... [Your existing page divs here] ... -->

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // =============== LOGIN SYSTEM ===============
    const validUsers = [
        { username: "EMP001", email: "john@example.com", password: "password123", name: "John Doe" },
        { username: "EMP002", email: "jane@example.com", password: "jane2025", name: "Jane Smith" },
        { username: "EMP003", email: "rahul@example.com", password: "rahul123", name: "Rahul Kumar" }
    ];

    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value;

        const user = validUsers.find(u => 
            (u.username === username || u.email === username) && u.password === password
        );

        if (user) {
            // Save login state
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('currentUser', JSON.stringify(user));

            // Update welcome name
            document.getElementById('welcomeName').textContent = user.name;

            // Show app, hide login
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
        } else {
            document.getElementById('loginError').textContent = 'Invalid credentials. Try EMP001 / password123';
        }
    });

    // Check if already logged in
    if (localStorage.getItem('isLoggedIn') === 'true') {
        const user = JSON.parse(localStorage.getItem('currentUser'));
        document.getElementById('welcomeName').textContent = user.name;
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
    }

    // Logout
    document.getElementById('logout').addEventListener('click', function(e) {
        e.preventDefault();
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('currentUser');
        document.getElementById('loginPage').classList.remove('hidden');
        document.getElementById('app').classList.add('hidden');
    });

    // =============== Your existing navigation & chat code ===============
    document.querySelectorAll('.nav-link[data-page]').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
            const pageId = this.getAttribute('data-page');
            document.getElementById(pageId).style.display = 'block';
        });
    });

    // Chat functionality
    function sendMessage() {
        const input = document.getElementById('chatInput');
        if (!input || input.value.trim() === '') return;
        const chatBox = document.getElementById('chatBox');
        const msg = document.createElement('div');
        msg.className = 'chat-message sent';
        msg.textContent = input.value;
        chatBox.appendChild(msg);
        chatBox.scrollTop = chatBox.scrollHeight;
        input.value = '';
    }

    const chatInput = document.getElementById('chatInput');
    if (chatInput) {
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
    }
</script>
</body>
</html>